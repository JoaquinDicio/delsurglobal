---
import { Image } from "astro:assets";
import logo from "../../assets/logo.png";
import menuIcon from "../../assets/menu.svg";

interface Props {
  baseRoute?: string;
  lang?: "es" | "en";
}

const { lang = "es" }: Props = Astro.props;

const texts: Record<"es" | "en", Record<string, string>> = {
  es: {
    home: "Inicio",
    services: "Servicios",
    distribution: "Distribución",
    products: "Productos",
    contact: "Contactar",
  },
  en: {
    home: "Home",
    services: "Services",
    distribution: "Distribution",
    products: "Products",
    contact: "Contact",
  },
};

const base = lang === "en" ? "/en" : "";
---

<header
  id="header"
  class="flex flex-wrap justify-between items-center px-5 md:px-12 md:py-10 py-5 fixed w-full text-[#ffff] z-100"
>
  <div class="flex items-center gap-2">
    <Image src={logo} alt={"Logo de DelSurGlobal"} />
    <h1 class="md:font-[600] text-xl font-bold md:text-2xl uppercase">
      <a href="./"> Del Sur Global </a>
    </h1>
  </div>

  <button id="menuBtn" class="max-w-[40px] lg:hidden"
    ><Image src={menuIcon} alt={"Menu de navegación"} /></button
  >

  <nav
    id="headerNav"
    aria-label={lang === "en" ? "Main navigation" : "Navegación principal"}
    class="w-full max-h-0 lg:max-h-none overflow-hidden transition-all duration-500 lg:overflow-visible lg:w-fit lg:block"
  >
    <ul class="flex gap-5 px-10 py-5 lg:py-0 lg:px-0 flex-col lg:flex-row">
      <li><a href={`${base}/#home`}>{texts[lang].home}</a></li>
      <li>
        <a href={`${base}/#services`}>{texts[lang].services}</a>
      </li>
      <li>
        <a href={`${base}/#distribution`}>{texts[lang].distribution}</a>
      </li>
      <li>
        <a href={`${base}/#products`}>{texts[lang].products}</a>
      </li>
      <li class="hidden lg:block">
        <a
          class="bg-[var(--gold-color)] rounded-sm text-white px-8 py-4 font-[600]"
          href={`${base}/#contact`}>{texts[lang].contact}</a
        >
      </li>
    </ul>
  </nav>
</header>

<style>
  header {
    transition: 0.75s;
  }

  .solid {
    padding: 1rem;
    background-color: var(--dark-color);
    opacity: 98%;
  }
</style>

<script>
  const header = document.querySelector("header");

  window.addEventListener("scroll", function () {
    const scrollPosition = window.scrollY;

    if (scrollPosition > 100) {
      header?.classList.add("solid");
    } else {
      header?.classList.remove("solid");
    }
  });

  const menuBtn = document.getElementById("menuBtn");

  const nav = document.getElementById("headerNav");

  menuBtn?.addEventListener("click", (e) => {
    nav?.classList.toggle("max-h-0");
    nav?.classList.toggle("max-h-[500px]");
    if (window.scrollY < 100) {
      header?.classList.toggle("solid");
    }
  });
</script>

<style>
  @media (max-width: 350px) {
    img {
      width: 60px;
    }
  }
</style>
